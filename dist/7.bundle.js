(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{139:function(e,t){},144:function(e,t,n){var r=n(145);"string"==typeof r&&(r=[[e.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(13)(r,o);r.locals&&(e.exports=r.locals)},145:function(e,t,n){(e.exports=n(12)(!1)).push([e.i,".lot-section{height:100%;width:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.lot-cont{padding:30px 15px;display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;width:100%;max-width:1500px}.lot-photos{width:40%;height:700px}.lot-photos>div{width:100%}.lot-main-photo{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;height:80%;position:relative}.lot-main-photo img{max-width:100%;max-height:100%}.photo-nav{position:absolute;height:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;top:0}.photo-nav i{color:#3ec5f4;font-size:1.5em;cursor:pointer;padding:10px}.photo-nav.prev{left:15px}.photo-nav.next{right:15px}.lot-photo-list{display:-webkit-box;display:-ms-flexbox;display:flex;height:20%;overflow-y:hidden;overflow-x:auto}.lot-photo-list img{height:100%;margin:0 10px;cursor:pointer;padding:5px;border:3px solid transparent}.lot-photo-list img.active{border-radius:5px;border-color:#3ec5f4}.lot-description{padding-left:20px;width:60%}.lot-description .lot-title{font-weight:bold;font-size:4em;color:#094d6e}.lot-description p{margin-top:20px;color:rgba(9,77,110,0.75);text-indent:50px}.lot-description p.lot-date{text-align:right}.lot-description .lot-comments{width:100%}.lot-comments{width:100%;margin-top:30px;padding:10px 50px}.lot-comments h2{font-weight:bold;font-size:3em;color:#094d6e;margin:20px 0 20px -50px}.lot-result-container{margin-top:20px}.lot-result-container.sold{color:red}.lot-result-container.sold-to-you{color:#84da00}.lot-result-container.finished{color:grey}.load-more-comments{padding:20px;text-align:center;font-size:1.1em;color:#094d6e;font-weight:bold;cursor:pointer}.auction-result-status{padding:20px 30px;display:inline-block;font-size:2em;font-weight:bold;border:4px solid;border-radius:8px;text-transform:uppercase}.lot-result-container-text{margin-top:15px;font-size:1.5em}.lot-comments-input{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end;position:relative}.lot-comments-input .prevent-comment{text-align:center;position:absolute;display:-webkit-box;display:-ms-flexbox;display:flex;width:100%;height:100%;border-radius:8px;font-size:2em;color:#094d6e;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;background:rgba(223,223,223,0.46)}.lot-comments-input textarea{outline:none;height:100px;padding:10px;resize:none;width:100%;border-radius:8px;font-size:1em;font-family:inherit}.lot-comments-input textarea:focus{border-color:#3ec5f4}.lot-comments-input button{padding:8px 20px}.load-more{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;padding:10px;cursor:pointer;color:#094d6e}.comment-container{padding:10px;margin-top:10px;border-bottom:1px solid rgba(9,77,110,0.26)}.comment-container:first-child{border-top:1px solid rgba(9,77,110,0.26)}.comment-container .comment-author{font-weight:bold;margin-bottom:5px}.comment-container .comment-text{padding-left:10px}.quick-bid-list{display:-webkit-box;display:-ms-flexbox;display:flex}.quick-bid-box{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;padding:15px 20px;background:#3ec5f4;border:1px solid white;color:white;font-weight:bold;font-size:1.1em}.quick-bid-box:first-child{border-bottom-left-radius:8px;border-top-left-radius:8px}.quick-bid-box:last-child{border-bottom-right-radius:8px;border-top-right-radius:8px}.quick-bid-box:hover{cursor:pointer;background:#094d6e}.price-wrapper{margin:5px 0;position:relative}.price-wrapper .button-common{margin:0 0 0 10px}.price-wrapper input{padding:10px 30px 10px 10px;border:1px solid #dfdfdf;border-radius:8px;font-size:1em;outline:none;width:200px;margin:0;font-family:inherit}.price-wrapper::before{content:'$';position:absolute;left:166px;top:0;height:100%;width:30px;border-left:1px solid #dfdfdf;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.price-wrapper.time-wrapper::before{content:'\\F017'}.price-wrapper.date-wrapper::before{content:'\\F073'}.start-price,.current-price,.time-left{color:#094d6e;font-size:1.5em;margin:15px 0}.start-price span,.current-price span,.time-left span{font-weight:bold}.your-bid-is-last{padding:10px;background:greenyellow;border-radius:8px;color:white;font-weight:bold}.quick-bid-title{text-transform:uppercase;color:#094d6e;margin-bottom:5px;margin-top:20px;font-weight:bold}@media all and (max-width: 750px){.lot-cont>div{width:100%}.lot-cont>div:first-child{-webkit-box-ordinal-group:3;-ms-flex-order:2;order:2}.lot-cont>div:nth-child(2){-webkit-box-ordinal-group:2;-ms-flex-order:1;order:1}.lot-cont>div:last-child{-webkit-box-ordinal-group:4;-ms-flex-order:3;order:3}.quick-bid-box{width:20%}.lot-description{padding:0}.lot-comments{padding:0}.lot-comments h2{margin-left:0}.start-price,.current-price,.time-left{font-size:1.3em}}\n",""])},157:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return re}));var r=n(0),o=n.n(r),i=n(36),a=n.n(i),c=n(61),l=n.n(c),s=function(e){var t=e._id,n=e.user,r=e.text;return o.a.createElement("div",{className:"comment-container",key:t},o.a.createElement("div",{className:"comment-author"},n.username),o.a.createElement("div",{className:"comment-text"},r))};function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){g(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v(e);if(t){var o=v(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y(this,n)}}function y(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?x(e):t}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(c,e);var t,n,r,i=h(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),g(x(t=i.call(this,e)),"fetchComments",(function(){a.a.post("/api/comment/fetch",{page:t.page,lot:t.props._id}).then((function(e){t.page++,t.setState((function(t){return{comments:t.comments.concat(e.data),commentsAvailable:e.data.length>0}}))}))})),g(x(t),"postComment",(function(){a.a.post("/api/comment/add",{text:t.state.commentText,lot:t.props._id}).then((function(e){var n=t.state.comments;t.setState({commentText:"",comments:[m(m({},e.data),{},{user:{username:t.props.user}})].concat(n)})})).catch((function(e){}))})),g(x(t),"handleTextChange",(function(e){t.setState({commentText:e.target.value})})),t.state={commentText:"",comments:[],commentsAvailable:!0},t.page=1,t}return t=c,(n=[{key:"componentDidMount",value:function(){this.fetchComments()}},{key:"render",value:function(){var e=this.props.user,t=this.state,n=t.commentText,r=t.comments,i=t.commentsAvailable;return o.a.createElement("div",{className:"lot-comments"},o.a.createElement("h2",null,"Comments: "),o.a.createElement("div",{className:"lot-comments-input"},e?null:o.a.createElement("div",{className:"prevent-comment"},"Only authorized users can post comments"),o.a.createElement("textarea",{placeholder:"Type text of comment ...",value:n,onChange:this.handleTextChange,maxLength:1e3}),o.a.createElement("button",{className:"button-common",onClick:this.postComment},"Post")),o.a.createElement("div",{className:"lot-comments-list"},r.map((function(e,t){return o.a.createElement(s,p({key:t},e))})),i&&r.length>9?o.a.createElement("div",{className:"load-more-comments",onClick:this.fetchComments},"Load more..."):null))}}])&&d(t.prototype,n),r&&d(t,r),c}(o.a.Component);function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=S(e);if(t){var o=S(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return j(this,n)}}function j(e,t){return!t||"object"!==k(t)&&"function"!=typeof t?N(e):t}function N(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var C=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(a,e);var t,n,r,i=P(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),_(N(t=i.call(this,e)),"deleteTimer",(function(){clearInterval(t.interval)})),_(N(t),"timeToString",(function(e){var t=Math.floor(e/1e3),n=Math.floor(t/86400);t-=3600*n*24;var r=Math.floor(t/3600);t-=3600*r;var o=Math.floor(t/60);return(n?n+"d ":"")+(r+"h ")+(o+"m ")+((t-=60*o)+"s ")})),_(N(t),"calculateTimeToEnd",(function(){var e=Date.parse(t.props.endDate)-Date.now();if(e<0)return t.deleteTimer(),t.props.close();var n=t.timeToString(e);t.setState({timeLeft:n})})),_(N(t),"startCountTimerBack",(function(){if(Date.parse(t.props.endDate)-Date.now()<0)return t.props.close();t.calculateTimeToEnd(),t.interval=setInterval(t.calculateTimeToEnd,1e3)})),_(N(t),"handleBidInputChange",(function(e){var n=e.target.value,r=t.props.currPrice;n.match(/^[0-9]*$/)&&"0"!==n[0]&&t.setState({bidInput:n,makeBidDisabled:parseInt(n)<=r})})),_(N(t),"makeBid",(function(){t.props.makeBid(t.state.bidInput),t.setState({bidInput:""})})),_(N(t),"quickBid",(function(e){return function(n){t.props.makeBid(e)}})),t.state={timeLeft:"",bidInput:"",makeBidDisabled:!0},t.interval=null,t}return t=a,(n=[{key:"componentDidMount",value:function(){this.startCountTimerBack()}},{key:"componentWillUnmount",value:function(){this.deleteTimer()}},{key:"render",value:function(){var e=this,t=this.state,n=t.timeLeft,r=t.bidInput,i=t.makeBidDisabled,a=this.props,c=a.currUserId,l=a.actualUserBid,s=a.currPrice,u=a.byNowPrice,p=a.quickBidsArray,f=c&&c===l;return o.a.createElement("div",{className:"bidding-container"},o.a.createElement("div",{className:"bidding-info"},o.a.createElement("div",{className:"current-price ".concat(f?"your-bid-is-last":"")},"Current bid: ",o.a.createElement("span",null,s,"$")," ",f?" - Your bid is the last!":""),o.a.createElement("div",{className:"time-left"},"Time left: ",o.a.createElement("span",null,n))),o.a.createElement("div",{className:"bidding-tools"},o.a.createElement("div",{className:"quick-bid-container"},o.a.createElement("div",{className:"quick-bid-title"},"Quick bid"),o.a.createElement("div",{className:"quick-bid-list"},p.map((function(t){return o.a.createElement("div",{key:t,className:"quick-bid-box",onClick:e.quickBid(t)},t)})))),o.a.createElement("div",{className:"make-bid-container"},o.a.createElement("div",{className:"quick-bid-title"},"Custom bid"),o.a.createElement("div",{className:"price-wrapper"},o.a.createElement("input",{type:"text",name:"price",autoComplete:"off",id:"price",className:"price",value:r,onChange:this.handleBidInputChange}),o.a.createElement("button",{className:"button-common",onClick:this.makeBid,disabled:i},"Make bid"))),u?o.a.createElement("div",{className:"make-bid-container"},o.a.createElement("div",{className:"quick-bid-title"},"Buy now"),o.a.createElement("div",{className:"price-wrapper"},o.a.createElement("input",{type:"text",name:"price",autoComplete:"off",id:"price",className:"price",value:u,readOnly:!0}),o.a.createElement("button",{className:"button-common",onClick:this.props.buyNow},"Buy now"))):null))}}])&&E(t.prototype,n),r&&E(t,r),a}(o.a.Component);function B(e){var t,n=e.closed,r=e.actualUserBid,i=e.currUserId,a=e.currPrice;return n&&!r?o.a.createElement("div",{className:"lot-result-container finished"},o.a.createElement("span",{className:"auction-result-status"},"Finished"),o.a.createElement("div",{className:"lot-result-container-text"},"Auction has finished without a winner")):n&&r&&i&&r===i?(t=a,o.a.createElement("div",{className:"lot-result-container sold-to-you"},o.a.createElement("span",{className:"auction-result-status"},"Sold"),o.a.createElement("div",{className:"lot-result-container-text"},"You have bought this lot for: ",t,"$"))):n&&r?function(e){return o.a.createElement("div",{className:"lot-result-container sold"},o.a.createElement("span",{className:"auction-result-status"},"Sold"),o.a.createElement("div",{className:"lot-result-container-text"},"This lot was sold for: ",e,"$"))}(a):null}function D(e){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function R(e,t){return(R=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=L(e);if(t){var o=L(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return q(this,n)}}function q(e,t){return!t||"object"!==D(t)&&"function"!=typeof t?U(e):t}function U(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function L(e){return(L=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function A(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var z=function(e){var t=e.onClick;return o.a.createElement("span",{className:"photo-nav prev"},o.a.createElement("i",{className:"fas fa-chevron-left",onClick:t}))},M=function(e){var t=e.onClick;return o.a.createElement("span",{className:"photo-nav next"},o.a.createElement("i",{className:"fas fa-chevron-right",onClick:t}))},$=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&R(e,t)}(a,e);var t,n,r,i=I(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),A(U(t=i.call(this,e)),"changePhotoIndex",(function(e){t.setState({activePhoto:e})})),A(U(t),"selectNext",(function(){t.changePhotoIndex(t.state.activePhoto+1)})),A(U(t),"selectPrev",(function(){t.changePhotoIndex(t.state.activePhoto-1)})),t.state={activePhoto:0},t}return t=a,(n=[{key:"render",value:function(){var e=this,t=this.props,n=t.photos,r=t._id,i=this.state.activePhoto,a=!!n[i-1],c=!!n[i+1];return o.a.createElement("div",{className:"lot-photos"},o.a.createElement("div",{className:"lot-main-photo"},a?o.a.createElement(z,{onClick:this.selectPrev}):null,c?o.a.createElement(M,{onClick:this.selectNext}):null,o.a.createElement("img",{src:"/".concat(r,"/").concat(n[i]),alt:"lot image"})),o.a.createElement("div",{className:"lot-photo-list"},n.map((function(t,n){return o.a.createElement("img",{key:n,src:"/".concat(r,"/").concat(t),className:n===i?"active":"",onClick:e.changePhotoIndex.bind(e,n),alt:"lot-photo-little"})}))))}}])&&T(t.prototype,n),r&&T(t,r),a}(o.a.Component),Q=n(15);n(144);function F(e){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function J(){return(J=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(Object(n),!0).forEach((function(t){ne(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function G(e){return function(e){if(Array.isArray(e))return H(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return H(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return H(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function K(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function V(e,t){return(V=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function X(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=te(e);if(t){var o=te(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Z(this,n)}}function Z(e,t){return!t||"object"!==F(t)&&"function"!=typeof t?ee(e):t}function ee(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function te(e){return(te=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ne(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var re=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&V(e,t)}(c,e);var t,n,r,i=X(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),ne(ee(t=i.call(this,e)),"getQuickBidStep",(function(){var e=t.state.currPrice;return e<100?5:e<1e3?50:e<5e3?250:e<1e4?500:1e3})),ne(ee(t),"updateQuickBids",(function(){var e=t.state.currPrice,n=t.getQuickBidStep(),r=G(new Array(5)).map((function(t,r){return n*(r+1)+e}));t.setState({quickBidsArray:r})})),ne(ee(t),"leaveLotRoom",(function(){t.socket.emit("disconnect from lot room",{lot:t.state._id})})),ne(ee(t),"joinToLotRoom",(function(){t.socket.emit("connect to lot room",{lot:t.state._id})})),ne(ee(t),"initSocketListeners",(function(){t.socket.on("price update",t.handlePriceUpdate),t.socket.on("bid failure",t.handleBidFailure),t.socket.on("lot closed",t.handleLotClosing),t.socket.on("close lot",t.handleBuyNow)})),ne(ee(t),"handlePriceUpdate",(function(e){var n=e.price,r=e.user;t.setState({currPrice:n,actualUserBid:r},t.updateQuickBids)})),ne(ee(t),"handleBuyNow",(function(e){var n=e.price,r=e.user;t.setState({currPrice:n,actualUserBid:r,closed:!0})})),ne(ee(t),"handleBidFailure",(function(e){e.price})),ne(ee(t),"handleLotClosing",(function(){t.setState({closed:!0})})),ne(ee(t),"fetchLotData",(function(e){a.a.post("/api/lot/data",{id:e}).then((function(e){t.setState(Y(Y({},e.data),{},{currPrice:e.data.currPrice||e.data.startPrice}),t.updateQuickBids),t.joinToLotRoom()}))})),ne(ee(t),"makeBid",(function(e){var n=t.state,r=n._id,o=n.currPrice,i=t.props.currUserId;if(!i)return t.loginError();var a=parseInt(e);a<=o||(t.socket.emit("make a bid",{lot:r,sum:a,user:i}),t.setState({bidInput:""}))})),ne(ee(t),"loginError",(function(){t.props.openLoginPopup()})),ne(ee(t),"closeLot",(function(){t.state.closed||t.setState({closed:!0})})),ne(ee(t),"buyNow",(function(){var e=t.state,n=e._id,r=e.byNowPrice,o=t.props.currUserId;if(!o)return t.loginError();t.socket.emit("buy now",{lot:n,sum:r,user:o})})),t.state={closed:!1,_id:"",name:"",description:"",startPrice:0,currPrice:0,photos:[],timestamp:"",endDate:"",byNowPrice:500,actualUserBid:null,quickBidsArray:[]},t.socket=null,t}return t=c,(n=[{key:"componentDidMount",value:function(){var e=this.props.match.params.id;this.fetchLotData(e),this.socket=l()(),this.initSocketListeners()}},{key:"componentWillUnmount",value:function(){this.leaveLotRoom()}},{key:"render",value:function(){var e=this.state,t=e.name,n=e.description,r=e.startPrice,i=e.currPrice,a=e.photos,c=e.timestamp,l=e._id,s=e.endDate,u=e.actualUserBid,p=e.byNowPrice,f=e.closed,m=e.quickBidsArray,d=this.props.currUserId;return o.a.createElement("section",{className:"lot-section"},t?null:o.a.createElement(Q.a,null),o.a.createElement("div",{className:"lot-cont"},o.a.createElement($,{photos:a,_id:l}),o.a.createElement("div",{className:"lot-description"},o.a.createElement("h1",{className:"lot-title"},t),o.a.createElement("p",{className:"lot-description-text"},n),o.a.createElement("p",{className:"lot-date"},"Start price: ",o.a.createElement("span",null,r,"$")),o.a.createElement("p",{className:"lot-date"},"Posted: ",new Date(c).toDateString()),o.a.createElement(B,{closed:f,actualUserBid:u,currUserId:d,currPrice:i}),!f&&l?o.a.createElement(C,J({currUserId:d,actualUserBid:u,currPrice:i,byNowPrice:p,endDate:s,quickBidsArray:m},{close:this.closeLot,makeBid:this.makeBid,buyNow:this.buyNow})):null),l?o.a.createElement(w,{_id:this.state._id,user:this.props.user}):null))}}])&&K(t.prototype,n),r&&K(t,r),c}(o.a.Component)}}]);